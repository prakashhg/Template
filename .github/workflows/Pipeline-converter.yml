
#!/usr/bin/env bash
set -euo pipefail

# Repo name variable (optional)
repo_name="${repo_name:-My_Project}"

echo "üîç Checking for GitLab CI files in $repo_name..."

# Ensure we're inside a Git repo
if [[ ! -d ".git" ]]; then
  echo "‚ùå Not inside a Git repository. Please cd into $repo_name first."
  exit 1
fi

# Detect root GitLab CI file
candidate=""
for f in ".gitlab-ci.yml" ".gitlab-ci.yaml"; do
  if [[ -f "$f" ]]; then
    candidate="$f"
    break
  fi
done

if [[ -z "$candidate" ]]; then
  echo "‚ùå No .gitlab-ci.yml or .gitlab-ci.yaml found in root."
  exit 0
fi

# Create GitHub workflows directory if missing
mkdir -p .github/workflows

# Move the file and rename it
new_path=".github/workflows/gitlab-pipeline-legacy.yml"
mv "$candidate" "$new_path"

echo "‚úÖ Moved $candidate ‚Üí $new_path"
echo "‚ÑπÔ∏è Note: This file is still in GitLab CI syntax. Conversion to GitHub Actions will happen later
